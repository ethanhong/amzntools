async function startLaborTrack(t,e,n=5,o=10,i=""){const c="aftlite-na.amazon.com"===window.location.hostname,a=i||document.getElementsByTagName("span")[0].innerHTML.match(/\(([^)]+)\)/)[1],r=[t,...e].map((t=>t.toUpperCase())),s=await fetch(`/labor_tracking/lookup_history?user_name=${a}`).then((t=>t.text())).then((t=>(new DOMParser).parseFromString(t,"text/html"))).then((t=>t.querySelector(c?".reportLayout > tbody:nth-child(1) > tr:nth-child(2) > td:nth-child(2)":"table.a-bordered > tbody > tr:nth-child(2) > td:nth-child(2) > p:nth-child(1)").textContent.trim().toUpperCase()));if("EOS"!==s){if(r.includes(s))return console.log(`Current activity is ${s}. Wait ${n} minust to check again.`),void setTimeout((()=>startLaborTrack(t,e,n,o,i)),60*n*1e3);if("BRK"===s)return console.log(`Current activity is ${s}. Wait ${o} minutes to checkin.`),void setTimeout((()=>checkin(a,t)),60*o*1e3);console.log(`Current activity is ${s}. Checkin now.`),checkin(a,t)}else console.log(`Current activity is ${s}. Stop the script.`)}function checkin(t,e){console.log(`Checkin ${t} to ${e}.`),document.getElementsByName("name")[0].value=t,document.getElementsByName("code")[0].value=e,document.getElementsByTagName("form")[0].submit()}
